<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Orbbec ROS2 SDK &mdash; OrbbecSDK ROS2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=b37f6b4d" />

  
    <link rel="shortcut icon" href="../../_static/web_html_logo.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            OrbbecSDK ROS2
              <img src="../../_static/orbbec-light_no_colour.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application Document</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../1_overview/overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/typical_applications.html">1.1. Typical applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/supported_cameras.html">1.2. Supported cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_overview/supported_platforms.html">1.3. Supported platforms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../2_installation/installation.html">2. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../2_installation/build_the_package.html">2.1. Build the package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#get-source-code-of-orbbecsdk-ros2">2.1.1. Get source code of OrbbecSDK_ROS2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#install-environment">2.1.2. Install Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#common-configurations">2.1.3. Common Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#use-v4l2-backend">2.1.3.1. Use V4L2 backend</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#predefined-presets">2.1.3.2. Predefined presets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#depth-work-mode-switch">2.1.3.3. Depth work mode switch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#configuration-of-depth-nfov-and-wfov-modes">2.1.3.4. Configuration of depth NFOV and WFOV modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#network-device-enumeration">2.1.3.5. Network device enumeration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/build_the_package.html#compressed-image">2.1.3.6. Compressed Image</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#build-project">2.1.4. Build project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/build_the_package.html#building-a-debian-package">2.1.5. Building a Debian Package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2_installation/package_description.html">2.2. Package  description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/package_description.html#all-available-topics">2.2.1. All available topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/package_description.html#all-available-services">2.2.2. All available services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/package_description.html#launch">2.2.3. Launch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/package_description.html#yaml-files">2.2.4. YAML files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_installation/package_description.html#coordinate-systems">2.2.5. Coordinate Systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/package_description.html#ros2-robot-vs-optical-camera-coordination-systems">2.2.5.1. ROS2(Robot) vs Optical(Camera) Coordination Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/package_description.html#camera-sensor-structure">2.2.5.2. Camera sensor structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2_installation/package_description.html#tf-from-coordinate-a-to-coordinate-b">2.2.5.3. TF from coordinate A to coordinate B:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html">3. Start single camera</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html#id1">3.1. Start single camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html#visualizing-data-in-rviz2">3.2. Visualizing Data in RViz2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html#display-view-topics-service">3.3. Display view topics service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html#example-visualizations">3.4. Example Visualizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_start_single_camera/start_single_camera.html#tf-tree-diagram">3.5. TF tree diagram</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html">4. Start multiple cameras</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#identifying-camera-usb-ports">4.1. Identifying Camera USB Ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#list-connected-cameras">4.2. List Connected Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#launching-multiple-cameras">4.3. Launching Multiple Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#setup-for-multiple-camera-launch">4.4. Setup for Multiple Camera Launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#running-the-launch-file">4.5. Running the Launch File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#configuring-the-tf-tree-for-multiple-cameras">4.6. Configuring the TF Tree for Multiple Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_start_multi_camera/start_multi_camera.html#example-tf-configuration-for-two-cameras">4.7. Example TF Configuration for Two Cameras</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5_robot_integrations/robot_integra.html">5. Robot Intergrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../5_robot_integrations/robot_integrations.html">5.1. Robot integrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5_robot_integrations/robot_integrations.html#example-1">5.1.1. Example 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5_robot_integrations/robot_integrations.html#example2">5.1.2. Example2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../6_advanced/advanced.html">6. Advanced</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/multi_camera_sync.html">6.1. Multi camera sync</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#preparation">6.1.1. Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#check-the-camera-usb-port">6.1.2. Check the camera usb port</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#configure-multi-camera-synced-launch-py">6.1.3. Configure multi_camera_synced.launch.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#run-multi-camera-synced-launch-py">6.1.4. Run multi_camera_synced.launch.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#advanced-parameters">6.1.5. Advanced Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/multi_camera_sync.html#gmsl-example">6.1.6. Gmsl example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/component_node.html">6.2. Component node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/component_node.html#creating-a-component-node">6.2.1. Creating a Component Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/component_node.html#loading-a-single-node-into-a-component-container">6.2.2. Loading a Single Node into a Component Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/component_node.html#loading-a-launch-py-into-a-component-container">6.2.3. Loading a launch.py into a Component Container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/zero_copy.html">6.3. Zero-copy communications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/zero_copy.html#efficient-intra-process-communication">6.3.1. Efficient intra-process communication:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/zero_copy.html#example">6.3.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/zero_copy.html#manually-loading-multiple-components-into-the-same-process">6.3.3. Manually loading multiple components into the same process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/zero_copy.html#using-a-launch-file">6.3.4. Using a launch file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/zero_copy.html#limitations">6.3.5. Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/gdb_debug.html">6.4. GDB debug</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#compile-the-program-with-debug-information">6.4.1. Compile the program with debug information:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#start-the-node-with-gdb">6.4.2. Start the node with GDB:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#configure-gdb-in-a-launch-file">6.4.3. Configure GDB in a launch file:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#use-gdb-for-debugging">6.4.4. Use GDB for debugging:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#set-up-linux-to-produce-core-files">6.4.5. Set up Linux to produce core files:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#use-vs-code-for-debugging">6.4.6. Use VS Code for debugging:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#use-the-backward-ros-package">6.4.7. Use the backward_ros package:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/gdb_debug.html#use-xterm-terminal-to-open-gdb-debugging">6.4.8. Use xterm terminal to open gdb debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/backward_ros.html">6.5. Backward ros</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/backward_ros.html#add-backward-ros-as-a-dependency">6.5.1. Add <code class="docutils literal notranslate"><span class="pre">backward_ros</span></code> as a dependency:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/backward_ros.html#configure-cmakelists-txt">6.5.2. Configure <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/backward_ros.html#build-your-project-with-debug-information">6.5.3. Build your project with debug information:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/backward_ros.html#run-your-node">6.5.4. Run your node:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/backward_ros.html#example">6.5.5. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/benchmark.html">6.6. Benchmark</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/benchmark.html#launch-orbbec-camera-node">6.6.1. Launch Orbbec Camera Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/benchmark.html#use-benchmark-tools">6.6.2. Use Benchmark Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/benchmark.html#configure-and-run-benchmark">6.6.3. Configure and Run Benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/benchmark.html#analyze-results">6.6.4. Analyze Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6_advanced/fastdds_tuning.html">6.7. Fast DDS Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#adjusting-system-parameters">6.7.1. Adjusting System Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#ip-fragmentation-time">6.7.1.1. IP Fragmentation Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#ip-fragmentation-memory-threshold">6.7.1.2. IP Fragmentation Memory Threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#maximum-buffer-sizes">6.7.1.3. Maximum Buffer Sizes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#fast-dds-configuration">6.7.2. 2. Fast DDS Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#configuration-file-shm-fastdds-xml">6.7.2.1. Configuration File: <code class="docutils literal notranslate"><span class="pre">shm_fastdds.xml</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../6_advanced/fastdds_tuning.html#environment-variables">6.7.2.2. Environment Variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../7_tools/tool.html">7. Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../7_tools/tools.html">7.1. Some practical tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#list-devices-node">7.1.1. list_devices_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#list-depth-work-mode-node">7.1.2. list_depth_work_mode_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#list-camera-profile-mode-node">7.1.3. list_camera_profile_mode_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#multi-save-rgbir-node">7.1.4. multi_save_rgbir_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#metadata-save-files-node">7.1.5. metadata_save_files_node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7_tools/tools.html#metadata-export-files-node">7.1.6. metadata_export_files_node</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../8_help_center/help_center.html">8. Help Center</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../8_help_center/FAQ.html">8.1. FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../8_help_center/FAQ.html#unexpected-crash">8.1.1. Unexpected Crash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8_help_center/FAQ.html#no-data-stream-from-multiple-cameras">8.1.2. No Data Stream from Multiple Cameras</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8_help_center/FAQ.html#additional-troubleshooting">8.1.3. Additional Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8_help_center/FAQ.html#why-are-there-so-many-launch-files">8.1.4. Why Are There So Many Launch Files?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../8_help_center/issues.html">8.2. Issue</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../9_license/license.html">9. License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OrbbecSDK ROS2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Orbbec ROS2 SDK</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/source/temp/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="orbbec-ros2-sdk">
<h1>Orbbec ROS2 SDK<a class="headerlink" href="#orbbec-ros2-sdk" title="Link to this heading"></a></h1>
<p><a class="reference external" href="http://github.com/badges/stability-badges"><img alt="stable" src="http://badges.github.io/stability-badges/dist/stable.svg" /></a> <img alt="version" src="https://img.shields.io/badge/version-1.5.11-green" /></p>
<p>OrbbecSDK_ROS2 is a wrapper for the Orbbec 3D camera that provides seamless integration with the ROS 2 environment. It
supports ROS 2 Foxy, Humble, and Jazzy distributions.</p>
<!-- TOC --><ul class="simple">
<li><p><a class="reference external" href="#1">Start single camera</a></p>
<ul>
<li><p><a class="reference external" href="#table-of-contents">Table of Contents</a></p></li>
<li><p><a class="reference external" href="#3">Installations Instructions</a></p></li>
<li><p><a class="reference external" href="#getting-start">Getting start</a></p></li>
<li><p><a class="reference external" href="#efficient-intra-process-communication">Efficient intra-process communication:</a></p></li>
</ul>
</li>
</ul>
<!-- TOC --><section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading"></a></h2>
<!-- TOC --><ul class="simple">
<li><p><a class="reference external" href="#orbbec-ros2-sdk">Orbbec ROS2 SDK</a></p>
<ul>
<li><p><a class="reference external" href="#table-of-contents">Table of Contents</a></p></li>
<li><p><a class="reference external" href="#123">Installations Instructions</a></p></li>
<li><p><a class="reference external" href="#getting-start">Getting start</a></p></li>
<li><p><a class="reference external" href="#efficient-intra-process-communication">Efficient intra-process communication:</a></p>
<ul>
<li><p><a class="reference external" href="#example">Example</a></p>
<ul>
<li><p><a class="reference external" href="#manually-loading-multiple-components-into-the-same-process">Manually loading multiple components into the same process</a></p></li>
<li><p><a class="reference external" href="#using-a-launch-file">Using a launch file</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#limitations">Limitations</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#use-v4l2-backend">Use V4L2 backend</a></p></li>
<li><p><a class="reference external" href="#launch-parameters">Launch parameters</a></p></li>
<li><p><a class="reference external" href="#ros2robot-vs-opticalcamera-coordination-systems">ROS2-vs-Optical Coordination Systems</a></p></li>
<li><p><a class="reference external" href="#camera-sensor-structure">Camera sensor structure</a></p></li>
<li><p><a class="reference external" href="#tf-from-coordinate-a-to-coordinate-b">TF from coordinate A to coordinate B:</a></p></li>
<li><p><a class="reference external" href="#predefined-presets">Predefined presets</a></p></li>
<li><p><a class="reference external" href="#depth-work-mode-switch">Depth work mode switch</a></p></li>
<li><p><a class="reference external" href="#configuration-of-depth-nfov-and-wfov-modes">Configuration of depth NFOV and WFOV modes</a></p></li>
<li><p><a class="reference external" href="#all-available-service-for-camera-control">All available service for camera control</a></p></li>
<li><p><a class="reference external" href="#all-available-topics">All available topics</a></p></li>
<li><p><a class="reference external" href="#network-device-enumeration">Network device enumeration</a></p></li>
<li><p><a class="reference external" href="#multi-camera">Multi-Camera</a></p></li>
<li><p><a class="reference external" href="#compressed-image">Compressed Image</a></p></li>
<li><p><a class="reference external" href="#use-hardware-decoder-to-decode-jpeg">Use hardware decoder to decode JPEG</a></p>
<ul>
<li><p><a class="reference external" href="#rockchip-and-amlogic">rockchip and Amlogic</a></p></li>
<li><p><a class="reference external" href="#nvidia-jetson">Nvidia Jetson</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#check-which-profiles-the-camera-supports">Check which profiles the camera supports</a></p></li>
<li><p><a class="reference external" href="#building-a-debian-package">Building a Debian Package</a></p>
<ul>
<li><p><a class="reference external" href="#preparing-the-environment">Preparing the Environment</a></p></li>
<li><p><a class="reference external" href="#configuring-ros-dependencies">Configuring ROS Dependencies</a></p></li>
<li><p><a class="reference external" href="#building-the-package">Building the Package</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#launch-files">Launch files</a></p></li>
<li><p><a class="reference external" href="#product-support">Product support</a></p></li>
<li><p><a class="reference external" href="#dds-tuning">DDS Tuning</a></p></li>
<li><p><a class="reference external" href="#frequently-asked-questions">Frequently Asked Questions</a></p>
<ul>
<li><p><a class="reference external" href="#unexpected-crash">Unexpected Crash</a></p></li>
<li><p><a class="reference external" href="#no-data-stream-from-multiple-cameras">No Data Stream from Multiple Cameras</a></p></li>
<li><p><a class="reference external" href="#additional-troubleshooting">Additional Troubleshooting</a></p></li>
<li><p><a class="reference external" href="#why-are-there-so-many-launch-files">Why Are There So Many Launch Files?</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#other-useful-links">Other useful links</a></p></li>
<li><p><a class="reference external" href="#license">License</a></p></li>
</ul>
</li>
</ul>
<!-- TOC --></section>
<section id="installation-instructions">
<h2>Installation Instructions<a class="headerlink" href="#installation-instructions" title="Link to this heading"></a></h2>
<p>Install ROS 2</p>
<ul class="simple">
<li><p>Please refer to the
official <a class="reference external" href="https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html">ROS 2 installation guide</a>
guidance</p></li>
</ul>
<blockquote>
<div><p>If your ROS 2 command does not auto-complete, put the following two lines into your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>
or <code class="docutils literal notranslate"><span class="pre">.zshrc</span></code></p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>register-python-argcomplete3<span class="w"> </span>ros2<span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">eval</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>register-python-argcomplete3<span class="w"> </span>colcon<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Create <code class="docutils literal notranslate"><span class="pre">colcon</span></code> workspace</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/ros2_ws/src
</pre></div>
</div>
<p>Get source code</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/orbbec/OrbbecSDK_ROS2.git
<span class="nb">cd</span><span class="w"> </span>OrbbecSDK_ROS2
git<span class="w"> </span>checkout<span class="w"> </span>OrbbecSDK_V2.X
</pre></div>
</div>
<p>Install deb dependencies</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># assume you have sourced ROS environment, same blow</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libgflags-dev<span class="w"> </span>nlohmann-json3-dev<span class="w">  </span><span class="se">\</span>
ros-<span class="nv">$ROS_DISTRO</span>-image-transport<span class="w"> </span>ros-<span class="nv">$ROS_DISTRO</span>-image-publisher<span class="w"> </span>ros-<span class="nv">$ROS_DISTRO</span>-camera-info-manager<span class="w"> </span><span class="se">\</span>
ros-<span class="nv">$ROS_DISTRO</span>-diagnostic-updater<span class="w"> </span>ros-<span class="nv">$ROS_DISTRO</span>-diagnostic-msgs<span class="w"> </span>ros-<span class="nv">$ROS_DISTRO</span>-statistics-msgs<span class="w"> </span><span class="se">\</span>
ros-<span class="nv">$ROS_DISTRO</span>-backward-ros<span class="w"> </span>libdw-dev
</pre></div>
</div>
<p>Install udev rules.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w">  </span>~/ros2_ws/src/OrbbecSDK_ROS2/orbbec_camera/scripts
sudo<span class="w"> </span>bash<span class="w"> </span>install_udev_rules.sh
sudo<span class="w"> </span>udevadm<span class="w"> </span>control<span class="w"> </span>--reload-rules<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>udevadm<span class="w"> </span>trigger
</pre></div>
</div>
</section>
<section id="getting-start">
<h2>Getting start<a class="headerlink" href="#getting-start" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
<span class="c1"># build release, Default is Debug</span>
colcon<span class="w"> </span>build<span class="w"> </span>--event-handlers<span class="w">  </span>console_direct+<span class="w">  </span>--cmake-args<span class="w">  </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</pre></div>
</div>
<p>Launch camera node</p>
<ul class="simple">
<li><p>On terminal 1</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.<span class="w"> </span>./install/setup.bash
ros2<span class="w"> </span>launch<span class="w"> </span>orbbec_camera<span class="w"> </span>astra.launch.py<span class="w"> </span><span class="c1"># or other launch file, see below table</span>
</pre></div>
</div>
<ul class="simple">
<li><p>On terminal 2</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.<span class="w"> </span>./install/setup.bash
rviz2
</pre></div>
</div>
<p>Select the topic you want to display</p>
<ul class="simple">
<li><p>List topics / services/ parameters ( on terminal 3)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>topic<span class="w"> </span>list
ros2<span class="w"> </span>service<span class="w"> </span>list
ros2<span class="w"> </span>param<span class="w"> </span>list
</pre></div>
</div>
<ul class="simple">
<li><p>Get device info</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/get_device_info<span class="w"> </span>orbbec_camera_msgs/srv/GetDeviceInfo<span class="w"> </span><span class="s1">&#39;{}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Get SDK version</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/get_sdk_version<span class="w"> </span>orbbec_camera_msgs/srv/GetString<span class="w"> </span><span class="s1">&#39;{}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Get exposure</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/get_color_exposure<span class="w"> </span>orbbec_camera_msgs/srv/GetInt32<span class="w"> </span><span class="s1">&#39;{}&#39;</span>
</pre></div>
</div>
<blockquote>
<div><p>If your check <code class="docutils literal notranslate"><span class="pre">ir</span></code> or <code class="docutils literal notranslate"><span class="pre">depth</span></code>, please change <code class="docutils literal notranslate"><span class="pre">/camera/get_color_exposure</span></code>
to <code class="docutils literal notranslate"><span class="pre">/camera/get_ir_exposure</span></code> or <code class="docutils literal notranslate"><span class="pre">/camera/get_depth_exposure</span></code>, Same below.</p>
</div></blockquote>
<ul class="simple">
<li><p>Get gain</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/get_color_gain<span class="w"> </span>orbbec_camera_msgs/srv/GetInt32<span class="w"> </span><span class="s1">&#39;{}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Get white balance</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/get_white_balance<span class="w"> </span>orbbec_camera_msgs/srv/GetInt32<span class="w"> </span><span class="s1">&#39;{}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set auto exposure</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/set_color_auto_exposure<span class="w"> </span>std_srvs/srv/SetBool<span class="w"> </span><span class="s1">&#39;{data: false}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set white balance</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/set_white_balance<span class="w"> </span>orbbec_camera_msgs/srv/SetInt32<span class="w"> </span><span class="s1">&#39;{data: 4600}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set laser enable</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w">  </span>/camera/set_laser_enable<span class="w"> </span>std_srvs/srv/SetBool<span class="w"> </span><span class="s2">&quot;{data: true}&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>toggle sensor</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/toggle_ir<span class="w"> </span>std_srvs/srv/SetBool<span class="w"> </span><span class="s2">&quot;{data : true}&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>save point cloud</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/camera/save_point_cloud<span class="w"> </span>std_srvs/srv/Empty<span class="w"> </span><span class="s2">&quot;{}&quot;</span>
</pre></div>
</div>
</section>
<section id="efficient-intra-process-communication">
<h2>Efficient intra-process communication:<a class="headerlink" href="#efficient-intra-process-communication" title="Link to this heading"></a></h2>
<p>Our ROS2 Wrapper node supports zero-copy communications if loaded in the same process as a subscriber node. This can reduce copy times on image/pointcloud topics, especially with big frame resolutions and high FPS.</p>
<p>You will need to launch a component container and launch our node as a component together with other component nodes. Further details on “Composing multiple nodes in a single process” can be found <a class="reference external" href="https://docs.ros.org/en/rolling/Tutorials/Composition.html">here</a>.</p>
<p>Further details on efficient intra-process communication can be found <a class="reference external" href="https://docs.ros.org/en/humble/Tutorials/Intra-Process-Communication.html#efficient-intra-process-communication">here</a>.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h3>
<section id="manually-loading-multiple-components-into-the-same-process">
<h4>Manually loading multiple components into the same process<a class="headerlink" href="#manually-loading-multiple-components-into-the-same-process" title="Link to this heading"></a></h4>
<ul>
<li><p>Start the component:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>rclcpp_components<span class="w"> </span>component_container
</pre></div>
</div>
</li>
<li><p>Add the wrapper:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>component<span class="w"> </span>load<span class="w"> </span>/ComponentManager<span class="w"> </span>orbbec_camera<span class="w"> </span>orbbec_camera::OBCameraNodeDriver<span class="w"> </span>-e<span class="w"> </span>use_intra_process_comms:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>Load other component nodes (consumers of the wrapper topics) in the same way.</p>
</li>
</ul>
</section>
<section id="using-a-launch-file">
<h4>Using a launch file<a class="headerlink" href="#using-a-launch-file" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>orbbec_camera<span class="w"> </span>gemini_intra_process_demo_launch.py
</pre></div>
</div>
</section>
</section>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Node components are currently not supported on RCLPY</p></li>
<li><p>Compressed images using <code class="docutils literal notranslate"><span class="pre">image_transport</span></code> will be disabled as this isn’t supported with intra-process communication</p></li>
</ul>
</section>
</section>
<section id="use-v4l2-backend">
<h2>Use V4L2 backend<a class="headerlink" href="#use-v4l2-backend" title="Link to this heading"></a></h2>
<p>To enable the V4L2 backend for the Gemini2 series cameras, follow these steps:</p>
<ol class="simple">
<li><p>The Gemini2 series cameras support the V4L2 backend.</p></li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">config/OrbbecSDKConfig_v1.0.xml</span></code> file.</p></li>
<li><p>Set the navigation option to <code class="docutils literal notranslate"><span class="pre">LinuxUVCBackend</span></code>.</p></li>
<li><p>Change the backend setting to <code class="docutils literal notranslate"><span class="pre">V4L2</span></code>.</p></li>
</ol>
<p>Note: The V4L2 backend is not enabled by default.</p>
</section>
<section id="launch-parameters">
<h2>Launch parameters<a class="headerlink" href="#launch-parameters" title="Link to this heading"></a></h2>
<p>The following are the launch parameters available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">connection_delay</span></code>: The delay time in milliseconds for reopening the device. Some devices, such as Astra mini, require
a longer time to initialize and reopening the device immediately can cause firmware crashes when hot plugging.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_point_cloud</span></code>: Enables the point cloud.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_colored_point_cloud</span></code>: Enables the RGB point cloud.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">point_cloud_qos</span></code>, <code class="docutils literal notranslate"><span class="pre">[color|depth|ir]_qos</span></code>, <code class="docutils literal notranslate"><span class="pre">[color|depth|ir]_camera_info_qos</span></code>: ROS 2 Message Quality of Service (QoS)
settings. The possible values
are <code class="docutils literal notranslate"><span class="pre">SYSTEM_DEFAULT</span></code>, <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code>, <code class="docutils literal notranslate"><span class="pre">PARAMETER_EVENTS</span></code>, <code class="docutils literal notranslate"><span class="pre">SERVICES_DEFAULT</span></code>, <code class="docutils literal notranslate"><span class="pre">PARAMETERS</span></code>, <code class="docutils literal notranslate"><span class="pre">SENSOR_DATA</span></code> and are
case-insensitive. These correspond
to <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_system_default</span></code>, <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_default</span></code>, <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_parameter_events</span></code>, <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_services_default</span></code>, <code class="docutils literal notranslate"><span class="pre">rmw_qos_profile_parameters</span></code>,
and <code class="docutils literal notranslate"><span class="pre">SENSOR_DATA</span></code>, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_d2c_viewer</span></code>: Publishes the D2C overlay image (for testing only).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device_num</span></code>: The number of devices. This must be filled in if multiple cameras are required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color_width</span></code>, <code class="docutils literal notranslate"><span class="pre">color_height</span></code>, <code class="docutils literal notranslate"><span class="pre">color_fps</span></code>: The resolution and frame rate of the color stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ir_width</span></code>, <code class="docutils literal notranslate"><span class="pre">ir_height</span></code>, <code class="docutils literal notranslate"><span class="pre">ir_fps</span></code>: The resolution and frame rate of the IR stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">depth_width</span></code>, <code class="docutils literal notranslate"><span class="pre">depth_height</span></code>, <code class="docutils literal notranslate"><span class="pre">depth_fps</span></code>: The resolution and frame rate of the depth stream.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_color</span></code>: Enables the RGB camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_depth</span></code>: Enables the depth camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_ir</span></code>: Enables the IR camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">depth_registration</span></code>: Enables alignment of the depth frame to the color frame. This field is required when
the <code class="docutils literal notranslate"><span class="pre">enable_colored_point_cloud</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">usb_port</span></code>: The USB port of the camera. This is required when multiple cameras are used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_accel</span></code>: Enables the accelerometer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accel_rate</span></code>: The frequency of the accelerometer, the optional values
are <code class="docutils literal notranslate"><span class="pre">1.5625hz</span></code>, <code class="docutils literal notranslate"><span class="pre">3.125hz</span></code>, <code class="docutils literal notranslate"><span class="pre">6.25hz</span></code>, <code class="docutils literal notranslate"><span class="pre">12.5hz</span></code>, <code class="docutils literal notranslate"><span class="pre">25hz</span></code>, <code class="docutils literal notranslate"><span class="pre">50hz</span></code>, <code class="docutils literal notranslate"><span class="pre">100hz</span></code>, <code class="docutils literal notranslate"><span class="pre">200hz</span></code>, <code class="docutils literal notranslate"><span class="pre">500hz</span></code>, <code class="docutils literal notranslate"><span class="pre">1khz</span></code>, <code class="docutils literal notranslate"><span class="pre">2khz</span></code>, <code class="docutils literal notranslate"><span class="pre">4khz</span></code>, <code class="docutils literal notranslate"><span class="pre">8khz</span></code>, <code class="docutils literal notranslate"><span class="pre">16khz</span></code>, <code class="docutils literal notranslate"><span class="pre">32khz</span></code>.
The specific value depends on the current camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">accel_range</span></code>: The range of the accelerometer, the optional values are <code class="docutils literal notranslate"><span class="pre">2g</span></code>, <code class="docutils literal notranslate"><span class="pre">4g</span></code>, <code class="docutils literal notranslate"><span class="pre">8g</span></code>, <code class="docutils literal notranslate"><span class="pre">16g</span></code>. The specific value
depends on the current camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_gyro</span></code>: Enables the gyroscope.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gyro_rate</span></code>: The frequency of the gyroscope, the optional values
are <code class="docutils literal notranslate"><span class="pre">1.5625hz</span></code>, <code class="docutils literal notranslate"><span class="pre">3.125hz</span></code>, <code class="docutils literal notranslate"><span class="pre">6.25hz</span></code>, <code class="docutils literal notranslate"><span class="pre">12.5hz</span></code>, <code class="docutils literal notranslate"><span class="pre">25hz</span></code>, <code class="docutils literal notranslate"><span class="pre">50hz</span></code>, <code class="docutils literal notranslate"><span class="pre">100hz</span></code>, <code class="docutils literal notranslate"><span class="pre">200hz</span></code>, <code class="docutils literal notranslate"><span class="pre">500hz</span></code>, <code class="docutils literal notranslate"><span class="pre">1khz</span></code>, <code class="docutils literal notranslate"><span class="pre">2khz</span></code>, <code class="docutils literal notranslate"><span class="pre">4khz</span></code>, <code class="docutils literal notranslate"><span class="pre">8khz</span></code>, <code class="docutils literal notranslate"><span class="pre">16khz</span></code>, <code class="docutils literal notranslate"><span class="pre">32khz</span></code>.
The specific value depends on the current camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gyro_range</span></code>: The range of the gyroscope, the optional values
are <code class="docutils literal notranslate"><span class="pre">16dps</span></code>, <code class="docutils literal notranslate"><span class="pre">31dps</span></code>, <code class="docutils literal notranslate"><span class="pre">62dps</span></code>, <code class="docutils literal notranslate"><span class="pre">125dps</span></code>, <code class="docutils literal notranslate"><span class="pre">250dps</span></code>, <code class="docutils literal notranslate"><span class="pre">500dps</span></code>, <code class="docutils literal notranslate"><span class="pre">1000dps</span></code>, <code class="docutils literal notranslate"><span class="pre">2000dps</span></code>. The specific value depends on the
current camera.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enumerate_net_device</span></code>: Enables the function of enumerating network devices. True means enabled, false means disabled.
This feature is only supported by Femto Mega and Gemini 2 XL devices. When accessing these devices through the
network, the IP address of the device needs to be configured in advance. The enable switch needs to be set to true.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">depth_filter_config</span></code>: Configures the loading path for the depth filtering configuration file. By default, the depth
filtering configuration file is located in the /config/depthfilter directory. Supported only on Gemini2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">depth_precision</span></code>: The depth precision should be in the format <code class="docutils literal notranslate"><span class="pre">1mm</span></code>. The default value is <code class="docutils literal notranslate"><span class="pre">1mm</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_laser</span></code>: Enables the laser. The default value is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">laser_on_off_mode</span></code>: Laser on/off alternate mode, 0: off, 1: on-off alternate, 2: off-on alternate. The default value
is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">device_preset</span></code>: The default value is <code class="docutils literal notranslate"><span class="pre">Default</span></code>. Only the G330 series is supported. For more information, refer to
the <a class="reference external" href="https://www.orbbec.com/docs/g330-use-depth-presets/">G330 documentation</a>. Please refer to the table below to set
the <code class="docutils literal notranslate"><span class="pre">device_preset</span></code> value based on your use case. The value should be one of the preset names
listed <a class="reference external" href="#predefined-presets">in the table</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_decimation_filter</span></code>: This filter effectively reduces the depth scene complexity. The filter runs on kernel
sizes [2x2] to [8x8] pixels. The image size is scaled down proportionally in both dimensions to preserve the aspect
ratio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_hdr_merge</span></code>: This filter is used jointly with the depth HDR function. By merging consecutive depth images of
alternating exposure values, we can overcome challenges in acquiring depth values for under-illuminated and
over-illuminated objects simultaneously.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_sequence_id_filter</span></code>: This filter is used jointly with the depth HDR function and outputs only the sequence
with the specified sequence ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_threshold_filter</span></code>: This filter preserves depth values of interest and omits depth values out of scope.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_noise_removal_filter</span></code>: This filter removes speckle noise in clusters and gives rise to a less-filled depth
map.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_spatial_filter</span></code>: This filter performs multiple iterations of processing as specified by the magnitude
parameter to enhance the smoothness of depth data. It is also capable of filling small holes in depth maps.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_temporal_filter</span></code>: This filter is intended to improve the depth data persistency by manipulating per-pixel
values based on previous frames. The filter performs a single pass on the data, adjusting the depth values while also
updating the tracking history.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_hole_filling_filter</span></code>: This filter fills all holes in the depth map using the specified mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">retry_on_usb3_detection_failure</span></code>: If the camera is connected to a USB 2.0 port and is not detected, the system will
attempt to reset the camera up to three times. This setting aims to prevent USB 3.0 devices from being incorrectly
recognized as USB 2.0. It is recommended to set this parameter to <code class="docutils literal notranslate"><span class="pre">false</span></code> when using a USB 2.0 connection to avoid
unnecessary resets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_3d_reconstruction_mode</span></code>: Enables 3D reconstruction mode. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>. When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the camera
laser operates in on-off mode, capturing IR images (laser off) for VSLAM localization and depth images (laser on) for point cloud computation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tf_publish_rate</span></code>: The rate at which the camera publishes dynamic transforms. The default value is <code class="docutils literal notranslate"><span class="pre">0.0</span></code>, which means static transforms are published.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time_domain</span></code>: The frame time domain, string type, can be <code class="docutils literal notranslate"><span class="pre">device</span></code>, <code class="docutils literal notranslate"><span class="pre">global</span></code>, or <code class="docutils literal notranslate"><span class="pre">system</span></code>. <code class="docutils literal notranslate"><span class="pre">device</span></code> means using the hardware timestamp from the camera,
<code class="docutils literal notranslate"><span class="pre">system</span></code> means using the timestamp when the PC received the first packet of data or frame, and <code class="docutils literal notranslate"><span class="pre">global</span></code> is used for synchronized time across multiple
devices, aligning data from different sources to a common time base.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_sync_host_time</span></code>: Enables synchronization of the host time with the camera time. The default value is <code class="docutils literal notranslate"><span class="pre">true</span></code>, if
use global time, set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Some old devices may not support this feature.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config_file_path</span></code>: The path to the YAML configuration file. The default value is <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>. If the configuration file is not specified,
the default parameters from the launch file will be used. If you want to use a custom configuration file, please refer to <code class="docutils literal notranslate"><span class="pre">gemini_330_series.launch.py</span></code>.
<code class="docutils literal notranslate"><span class="pre">enable_heartbeat</span></code> enables the heartbeat function, which is set to <code class="docutils literal notranslate"><span class="pre">false</span></code> by default. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the camera node will send heartbeat signals to
the firmware, and if hardware logging is desired, it should also be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_level</span></code> : SDK log level, the default value is <code class="docutils literal notranslate"><span class="pre">info</span></code>, the optional values are <code class="docutils literal notranslate"><span class="pre">debug</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">warn</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">fatal</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable_color_undistortion</span></code>: Enables color undistortion, the default value is <code class="docutils literal notranslate"><span class="pre">false</span></code>. Note that our color cameras exhibit minimal distortion, and typically, undistortion is not necessary.</p></li>
</ul>
<p><strong>IMPORTANT</strong>: <em>Please carefully read the instructions regarding software filtering settings
at <a class="reference external" href="https://www.orbbec.com/docs/g330-use-depth-post-processing-blocks/">this link</a>. If you are uncertain, do not modify
these settings.</em></p>
</section>
<section id="ros2-robot-vs-optical-camera-coordination-systems">
<h2>ROS2(Robot) vs Optical(Camera) Coordination Systems<a class="headerlink" href="#ros2-robot-vs-optical-camera-coordination-systems" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Point Of View:</p>
<ul>
<li><p>Imagine we are standing behind of the camera, and looking forward.</p></li>
<li><p>Always use this point of view when talking about coordinates, left vs right IRs, position of sensor, etc..</p></li>
</ul>
</li>
</ul>
<p><img alt="ROS2 and Camera Coordinate System" src="source/temp/docs/images/image7.png" /></p>
<ul class="simple">
<li><p>ROS2 Coordinate System: (X: Forward, Y:Left, Z: Up)</p></li>
<li><p>Camera Optical Coordinate System: (X: Right, Y: Down, Z: Forward)</p></li>
<li><p>All data published in our wrapper topics is optical data taken directly from our camera sensors.</p></li>
<li><p>static and dynamic TF topics publish optical CS and ROS CS to give the user the ability to move from one CS to other CS.</p></li>
</ul>
</section>
<section id="camera-sensor-structure">
<h2>Camera sensor structure<a class="headerlink" href="#camera-sensor-structure" title="Link to this heading"></a></h2>
<p><img alt="module in rviz2" src="source/temp/docs/images/image9.png" /></p>
<p><img alt="module in rviz2" src="source/temp/docs/images/image10.png" /></p>
</section>
<section id="tf-from-coordinate-a-to-coordinate-b">
<h2>TF from coordinate A to coordinate B:<a class="headerlink" href="#tf-from-coordinate-a-to-coordinate-b" title="Link to this heading"></a></h2>
<p>In Orbbec cameras, the origin point (0,0,0) is taken from the camera_link position</p>
<p>Our wrapper provide static TFs between each sensor coordinate to the camera base (camera_link)</p>
<p>Also, it provides TFs from each sensor ROS coordinates to its corrosponding optical coordinates.</p>
<p>Example of static TFs of RGB sensor and right infra sensor of Gemini335 module as it shown in rviz2:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>orbbec_description<span class="w"> </span>view_model.launch.py<span class="w"> </span>model:<span class="o">=</span>gemini_335_336.urdf.xacro
</pre></div>
</div>
<p><img alt="module in rviz2" src="source/temp/docs/images/image8.png" /></p>
</section>
<section id="predefined-presets">
<h2>Predefined presets<a class="headerlink" href="#predefined-presets" title="Link to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th>Preset</th>
<th>Features</th>
<th>Recommended use cases</th>
</tr>
</thead>
<tbody>
<tr>
<td>Default</td>
<td>- Best visual perception``- Overall good performance in accuracy, fill rate, tiny objects, etc.</td>
<td>- Generic <code>&lt;br&gt;</code>- Robotics</td>
</tr>
<tr>
<td>Hand</td>
<td>- Clear hand and finger edges</td>
<td>- Gesture recognition</td>
</tr>
<tr>
<td>High Accuracy</td>
<td>- Depth of high confidence <code>&lt;br&gt;</code>- Barely noise depth values <code>&lt;br&gt;</code>- Lower fill rate</td>
<td>- Collision avoidance <code>&lt;br&gt;</code>- Object scanning</td>
</tr>
<tr>
<td>High Density</td>
<td>- Higher fill rate <code>&lt;br&gt;</code>- More tiny objects <code>&lt;br&gt;</code>- May suffer from noise depth values</td>
<td>- Object recognition <code>&lt;br&gt;</code>- Pick &amp; place <code>&lt;br&gt;</code>- Foreground &amp; background animation</td>
</tr>
<tr>
<td>Medium Density</td>
<td>- Balanced performance in fill rate and accuracy <code>&lt;br&gt;</code>- In comparison to Default: lower fill rate, better edge quality</td>
<td>- Generic and alternative to Default</td>
</tr>
<tr>
<td>Custom</td>
<td>- User defined Preset <code>&lt;br&gt;</code>- Derived from Presets above, with customized modifications, e.g. a new configuration for the post-processing pipeline, modified mean intensity set point of depth AE function, etc.</td>
<td>- Better depth performance achieved using customized configurations in comparison to using predefined presets <code>&lt;br&gt;</code>- For well-established custom configurations</td>
</tr>
</tbody>
</table><p>Choose the appropriate preset name based on your specific use case and set it as the value for the <code class="docutils literal notranslate"><span class="pre">device_preset</span></code>
parameter.</p>
</section>
<section id="depth-work-mode-switch">
<h2>Depth work mode switch<a class="headerlink" href="#depth-work-mode-switch" title="Link to this heading"></a></h2>
<p>OrbbecSDK_ROS2 supports the depth work mode switch. The depth work mode switch is supported by Gemini 2, Gemini 2 L,
and Femto and Femto Bolt cameras.</p>
<ul class="simple">
<li><p>Before starting the camera, depth work mode (depth_work_mode) can be configured for the corresponding xxx.launch.py
file’s support.</p></li>
<li><p>The depth work mode switch is supported by Gemini 2, Gemini 2 L, and Gemini 2 XL cameras.</p></li>
<li><p>The default depth work mode configuration of xxx.launch.py is the camera’s default configuration. If you need to
modify it, you can switch to the corresponding mode as needed.</p></li>
<li><p>The specific camera depth work mode support types can be found in the comments of the depth mode.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Depth work mode support is as follows:</span>
<span class="c1"># Unbinned Dense Default</span>
<span class="c1"># Unbinned Sparse Default</span>
<span class="c1"># Binned Sparse Default</span>
<span class="c1"># Obstacle Avoidance</span>
<span class="n">DeclareLaunchArgument</span><span class="p">(</span><span class="s1">&#39;depth_work_mode&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>View depth work modes:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>orbbec_camera<span class="w"> </span>list_depth_work_mode_node
</pre></div>
</div>
</section>
<section id="configuration-of-depth-nfov-and-wfov-modes">
<h2>Configuration of depth NFOV and WFOV modes<a class="headerlink" href="#configuration-of-depth-nfov-and-wfov-modes" title="Link to this heading"></a></h2>
<p>For the Femto Mega and Femto Bolt devices, the NFOV and WFOV modes are implemented by configuring the resolution of
Depth and IR in the launch file.
In launch file, depth_width、depth_height、ir_width、ir_height represents the resolution of the depth and the resolution of
the IR.
The frame fps and resolution of IR must be consistent with the depth. The correspondence between different modes and
resolutions is as follows:</p>
<ul class="simple">
<li><p>NFOV unbinned: 640 x 576.</p></li>
<li><p>NFOV binned: 320 x 288.</p></li>
<li><p>WFOV unbinned: 1024 x 1024.</p></li>
<li><p>WFOV binned: 512 x 512.</p></li>
</ul>
</section>
<section id="all-available-service-for-camera-control">
<h2>All available service for camera control<a class="headerlink" href="#all-available-service-for-camera-control" title="Link to this heading"></a></h2>
<p>The name of the following service already expresses its function.
However, it should be noted that the corresponding <code class="docutils literal notranslate"><span class="pre">set_[ir|depth|color]*</span></code>
and <code class="docutils literal notranslate"><span class="pre">get[ir|depth|color]*</span></code> <strong>services are only available if you set</strong> <code class="docutils literal notranslate"><span class="pre">enable[ir|depth|color]</span></code>
to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the stream that corresponds to the argument of the launch file.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_auto_white_balance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_color_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_color_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_depth_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_depth_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_device_info</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_ir_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_ir_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_ldp_status</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_sdk_version</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/get_white_balance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_auto_white_balance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_color_auto_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_color_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_color_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_depth_auto_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_depth_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_depth_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_fan_work_mode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_floor_enable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_ir_auto_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_ir_exposure</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_ir_gain</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_laser_enable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_ldp_enable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/set_white_balance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/toggle_color</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/toggle_depth</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/toggle_ir</span></code></p></li>
</ul>
</section>
<section id="all-available-topics">
<h2>All available topics<a class="headerlink" href="#all-available-topics" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/color/camera_info</span></code> : The color camera info.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/color/image_raw</span></code>: The color stream image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/depth/camera_info</span></code>: The depth stream image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/depth/image_raw</span></code>: The depth stream image</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/depth/points</span></code> : The point cloud, only available when <code class="docutils literal notranslate"><span class="pre">enable_point_cloud</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/depth_registered/points</span></code>: The colored point cloud, only available when <code class="docutils literal notranslate"><span class="pre">enable_colored_point_cloud</span></code>
is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/ir/camera_info</span></code>: The IR camera info.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/ir/image_raw</span></code>: The IR stream image</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/accel/sample</span></code>: Acceleration data stream <code class="docutils literal notranslate"><span class="pre">enable_sync_output_accel_gyro</span></code>turned off，<code class="docutils literal notranslate"><span class="pre">enable_accel</span></code>turned on</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/camera/gyro/sample</span></code>: Gyroscope data stream，enable_sync_output_accel_gyro <code class="docutils literal notranslate"><span class="pre">turned</span> <span class="pre">off，</span></code>enable_gyro`turned on</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">camera/gyro_accel/sample</span></code>: Synchronized data stream of acceleration and gyroscope，<code class="docutils literal notranslate"><span class="pre">enable_sync_output_accel_gyro</span></code>
turned on</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/diagnostics</span></code>: The diagnostic information of the camera, Currently, the diagnostic information only includes the
temperature of the camera.</p></li>
</ul>
</section>
<section id="network-device-enumeration">
<h2>Network device enumeration<a class="headerlink" href="#network-device-enumeration" title="Link to this heading"></a></h2>
<p>Currently, the network device enumeration function is supported only by the Femto Mega device. When accessing this
device over the network, if <code class="docutils literal notranslate"><span class="pre">enumerate_net_device</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the device will be automatically enumerated,
eliminating the need to configure the IP address in advance or set the enable switch to true. The specific configuration
methods are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enumerate_net_device</span></code>: enumeration network device automatically, only supported by Femto Mega.
if <code class="docutils literal notranslate"><span class="pre">enumerate_net_device</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the device will be enumerated automatically,No need to set
the <code class="docutils literal notranslate"><span class="pre">net_device_ip</span></code>
and <code class="docutils literal notranslate"><span class="pre">net_device_port</span></code> parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">net_device_ip</span></code>: The IP address of the device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">net_device_port</span></code>: The port number of the device.</p></li>
</ul>
</section>
<section id="multi-camera">
<h2>Multi-Camera<a class="headerlink" href="#multi-camera" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>To get the <code class="docutils literal notranslate"><span class="pre">usb_port</span></code> of the camera, plug in the camera and run the following command in the terminal:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>orbbec_camera<span class="w"> </span>list_devices_node
</pre></div>
</div>
<ul class="simple">
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">device_num</span></code> parameter to the number of cameras you have.</p></li>
<li><p>Go to the <code class="docutils literal notranslate"><span class="pre">OrbbecSDK_ROS2/launch/multi_xxx.launch.py</span></code> file and change the <code class="docutils literal notranslate"><span class="pre">usb_port</span></code>.</p></li>
<li><p>Don’t forget to put the <code class="docutils literal notranslate"><span class="pre">include</span></code> tag inside the <code class="docutils literal notranslate"><span class="pre">group</span></code> tag.
Otherwise, the parameter values of different cameras may become contaminated.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch.actions</span> <span class="kn">import</span> <span class="n">DeclareLaunchArgument</span><span class="p">,</span> <span class="n">IncludeLaunchDescription</span><span class="p">,</span> <span class="n">GroupAction</span><span class="p">,</span> <span class="n">ExecuteProcess</span>
<span class="kn">from</span> <span class="nn">launch.launch_description_sources</span> <span class="kn">import</span> <span class="n">PythonLaunchDescriptionSource</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="c1"># Include launch files</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;orbbec_camera&#39;</span><span class="p">)</span>
    <span class="n">launch_file_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;launch&#39;</span><span class="p">)</span>
    <span class="n">launch1_include</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="n">PythonLaunchDescriptionSource</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">launch_file_dir</span><span class="p">,</span> <span class="s1">&#39;gemini2L.launch.py&#39;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;camera_name&#39;</span><span class="p">:</span> <span class="s1">&#39;camera_01&#39;</span><span class="p">,</span>
            <span class="s1">&#39;usb_port&#39;</span><span class="p">:</span> <span class="s1">&#39;6-2.4.4.2&#39;</span><span class="p">,</span>  <span class="c1"># replace your usb port here</span>
            <span class="s1">&#39;device_num&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="n">launch2_include</span> <span class="o">=</span> <span class="n">IncludeLaunchDescription</span><span class="p">(</span>
        <span class="n">PythonLaunchDescriptionSource</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">launch_file_dir</span><span class="p">,</span> <span class="s1">&#39;gemini2L.launch.py&#39;</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="n">launch_arguments</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;camera_name&#39;</span><span class="p">:</span> <span class="s1">&#39;camera_02&#39;</span><span class="p">,</span>
            <span class="s1">&#39;usb_port&#39;</span><span class="p">:</span> <span class="s1">&#39;6-2.4.1&#39;</span><span class="p">,</span>  <span class="c1"># replace your usb port here</span>
            <span class="s1">&#39;device_num&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># If you need more cameras, just add more launch_include here, and change the usb_port and device_num</span>

    <span class="c1"># Launch description</span>
    <span class="n">ld</span> <span class="o">=</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">GroupAction</span><span class="p">([</span><span class="n">launch1_include</span><span class="p">]),</span>
        <span class="n">GroupAction</span><span class="p">([</span><span class="n">launch2_include</span><span class="p">]),</span>
    <span class="p">])</span>

    <span class="k">return</span> <span class="n">ld</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To launch the cameras, run the following command:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>orbbec_camera<span class="w"> </span>multi_camera.launch.py
</pre></div>
</div>
</section>
<section id="compressed-image">
<h2>Compressed Image<a class="headerlink" href="#compressed-image" title="Link to this heading"></a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">image_transport</span></code> to compress the image using <code class="docutils literal notranslate"><span class="pre">jpeg</span></code>. Below is an example of how to use it:</p>
<p>To access the compressed color image, you can use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/camera/color/image_raw/compressed<span class="w"> </span>--no-arr
</pre></div>
</div>
<p>This command will allow you to receive the compressed color image from the specified topic.</p>
</section>
<section id="use-hardware-decoder-to-decode-jpeg">
<h2>Use hardware decoder to decode JPEG<a class="headerlink" href="#use-hardware-decoder-to-decode-jpeg" title="Link to this heading"></a></h2>
<section id="rockchip-and-amlogic">
<h3>rockchip and Amlogic<a class="headerlink" href="#rockchip-and-amlogic" title="Link to this heading"></a></h3>
<p>Depends on <code class="docutils literal notranslate"><span class="pre">rockchip-mpp-dev</span></code> and <code class="docutils literal notranslate"><span class="pre">rockchip-rga-dev</span></code>, not all systems have these two packages, the names may be
different, please search by yourself.
Open <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> and set <code class="docutils literal notranslate"><span class="pre">USE_RK_HW_DECODER</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code>.</p>
</section>
<section id="nvidia-jetson">
<h3>Nvidia Jetson<a class="headerlink" href="#nvidia-jetson" title="Link to this heading"></a></h3>
<p>Depends on: <code class="docutils literal notranslate"><span class="pre">jetson_multimedia_api</span></code>,<code class="docutils literal notranslate"><span class="pre">libyuv</span></code>.
Open <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> and set <code class="docutils literal notranslate"><span class="pre">USE_NV_HW_DECODER</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code>.</p>
</section>
</section>
<section id="check-which-profiles-the-camera-supports">
<h2>Check which profiles the camera supports<a class="headerlink" href="#check-which-profiles-the-camera-supports" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>run<span class="w"> </span>orbbec_camera<span class="w"> </span>list_camera_profile_mode_node
</pre></div>
</div>
</section>
<section id="building-a-debian-package">
<h2>Building a Debian Package<a class="headerlink" href="#building-a-debian-package" title="Link to this heading"></a></h2>
<section id="preparing-the-environment">
<h3>Preparing the Environment<a class="headerlink" href="#preparing-the-environment" title="Link to this heading"></a></h3>
<p>Before starting, install the required tools:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>debhelper<span class="w"> </span>fakeroot<span class="w"> </span>python3-bloom
</pre></div>
</div>
</section>
<section id="configuring-ros-dependencies">
<h3>Configuring ROS Dependencies<a class="headerlink" href="#configuring-ros-dependencies" title="Link to this heading"></a></h3>
<p>Add the following YAML file to your system at <code class="docutils literal notranslate"><span class="pre">/etc/ros/rosdep/sources.list.d/00-orbbec.yaml</span></code>. Make sure to
replace <code class="docutils literal notranslate"><span class="pre">focal</span></code> with the codename of your Ubuntu version and <code class="docutils literal notranslate"><span class="pre">humble</span></code> with your ROS2 distribution name:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">orbbec_camera_msgs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ubuntu</span><span class="p">:</span>
<span class="w">    </span><span class="nt">focal</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">ros-humble-orbbec-camera-msgs</span><span class="w"> </span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Next, create a new file <code class="docutils literal notranslate"><span class="pre">/etc/ros/rosdep/sources.list.d/50-orbbec.list</span></code> and add this line to specify the path to the
YAML file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yaml<span class="w"> </span>file:///etc/ros/rosdep/sources.list.d/00-orbbec.yaml
</pre></div>
</div>
<p>Update the rosdep database to reflect these changes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosdep<span class="w"> </span>update
</pre></div>
</div>
</section>
<section id="building-the-package">
<h3>Building the Package<a class="headerlink" href="#building-the-package" title="Link to this heading"></a></h3>
<p>Navigate to your workspace and build the project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/ros2_ws/
colcon<span class="w"> </span>build<span class="w"> </span>--event-handlers<span class="w"> </span>console_direct+<span class="w"> </span>--cmake-args<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
.<span class="w"> </span>install/setup.bash
<span class="nb">cd</span><span class="w"> </span>src/OrbbecSDK_ROS2/
bash<span class="w"> </span>.make_deb.sh
</pre></div>
</div>
</section>
</section>
<section id="launch-files">
<h2>Launch files<a class="headerlink" href="#launch-files" title="Link to this heading"></a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th style="text-align: center;">product serials</th>
<th style="text-align: center;">Firmware Version</th>
<th style="text-align: center;"><strong>Firmware Version</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Astra2</td>
<td style="text-align: center;">2.8.20</td>
<td style="text-align: center;">astra2.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Femto mega</td>
<td style="text-align: center;">1.1.7/1.2.7</td>
<td style="text-align: center;">femto_mega.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Femto bolt</td>
<td style="text-align: center;">1.0.6/1.0.9</td>
<td style="text-align: center;">femto_bolt.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini2</td>
<td style="text-align: center;">1.4.60 /1.4.76</td>
<td style="text-align: center;">gemini2.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini2L</td>
<td style="text-align: center;">1.4.32</td>
<td style="text-align: center;">gemini2L.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini 335</td>
<td style="text-align: center;">1.2.20</td>
<td style="text-align: center;">gemini_330_series.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini 335L</td>
<td style="text-align: center;">1.2.20</td>
<td style="text-align: center;">gemini_330_series.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini 335Lg</td>
<td style="text-align: center;">1.3.46</td>
<td style="text-align: center;">gemini_330_series.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini 336</td>
<td style="text-align: center;">1.2.20</td>
<td style="text-align: center;">gemini_330_series.launch.py</td>
</tr>
<tr>
<td style="text-align: center;">Gemini 336L</td>
<td style="text-align: center;">1.2.20</td>
<td style="text-align: center;">gemini_330_series.launch.py</td>
</tr>
</tbody>
</table><p><strong>All launch files are essentially similar, with the primary difference being the default values of the parameters set
for different models
within the same series. Differences in USB standards, such as USB 2.0 versus USB 3.0, may require adjustments to these
parameters. If you
encounter a startup failure, please carefully review the specification manual. Pay special attention to the resolution
settings in the launch
file, as well as other parameters, to ensure compatibility and optimal performance.</strong></p>
</section>
<section id="product-support">
<h2>Product support<a class="headerlink" href="#product-support" title="Link to this heading"></a></h2>
<p>Please refer to the OrbbecSDK supported
products: <a class="reference external" href="https://github.com/orbbec/OrbbecSDK?tab=readme-ov-file#product-support">Product Support</a></p>
</section>
<section id="dds-tuning">
<h2>DDS Tuning<a class="headerlink" href="#dds-tuning" title="Link to this heading"></a></h2>
<p>The default DDS settings (Galactic) may not be optimal for data transmission. Different DDS settings can have varying
performance. In this example, we use CycloneDDS. For more detailed information, please refer to the
<a class="reference external" href="https://docs.ros.org/en/humble/How-To-Guides/DDS-tuning.html">ROS DDS Tuning</a>。</p>
<p>● Edit cyclonedds configuration file</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>gedit<span class="w"> </span>/etc/cyclonedds/config.xml
</pre></div>
</div>
<p>Add</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;CycloneDDS</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;https://cdds.io/config&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="w">            </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;https://cdds.io/confighttps://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Domain</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;any&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;General&gt;</span>
<span class="w">            </span><span class="nt">&lt;NetworkInterfaceAddress&gt;</span>lo<span class="nt">&lt;/NetworkInterfaceAddress&gt;</span>
<span class="w">            </span><span class="nt">&lt;AllowMulticast&gt;</span>false<span class="nt">&lt;/AllowMulticast&gt;</span>
<span class="w">        </span><span class="nt">&lt;/General&gt;</span>
<span class="w">        </span><span class="nt">&lt;Internal&gt;</span>
<span class="w">            </span><span class="nt">&lt;MinimumSocketReceiveBufferSize&gt;</span>16MB<span class="nt">&lt;/MinimumSocketReceiveBufferSize&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Internal&gt;</span>
<span class="w">        </span><span class="nt">&lt;Discovery&gt;</span>
<span class="w">            </span><span class="nt">&lt;ParticipantIndex&gt;</span>auto<span class="nt">&lt;/ParticipantIndex&gt;</span>
<span class="w">            </span><span class="nt">&lt;MaxAutoParticipantIndex&gt;</span>30<span class="nt">&lt;/MaxAutoParticipantIndex&gt;</span>
<span class="w">            </span><span class="nt">&lt;Peers&gt;</span>
<span class="w">                </span><span class="nt">&lt;Peer</span><span class="w"> </span><span class="na">address=</span><span class="s">&quot;localhost&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/Peers&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Discovery&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Domain&gt;</span>
<span class="nt">&lt;/CycloneDDS&gt;</span>
</pre></div>
</div>
<p>● Set the environment variables, add to <code class="docutils literal notranslate"><span class="pre">.zshrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="m">42</span><span class="w"> </span><span class="c1"># Numbers from 0 to 232</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ROS_LOCALHOST_ONLY</span><span class="o">=</span><span class="m">1</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CYCLONEDDS_URI</span><span class="o">=</span>file:///etc/cyclonedds/config.xml
</pre></div>
</div>
<p>Tip：to understand why the maximum ROS_DOMAIN_ID is 232, please
visit <a class="reference external" href="https://docs.ros.org/en/humble/Concepts/About-Domain-ID.html">The ROS DOMAIN ID</a>
● Increase UDP receive buffer size
Edit</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/etc/sysctl.d/10-cyclone-max.conf
</pre></div>
</div>
<p>Add</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>net.core.rmem_max<span class="o">=</span><span class="m">2147483647</span>
net.core.rmem_default<span class="o">=</span><span class="m">2147483647</span>
</pre></div>
</div>
<p>If you use Fast DDS, you can refer to the <a class="reference external" href="./docs/fastdds_tuning">Fast DDS Configuration</a> file.</p>
</section>
<section id="frequently-asked-questions">
<h2>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading"></a></h2>
<section id="unexpected-crash">
<h3>Unexpected Crash<a class="headerlink" href="#unexpected-crash" title="Link to this heading"></a></h3>
<p>If the camera node crashes unexpectedly, it will generate a crash log in the current running directory: <code class="docutils literal notranslate"><span class="pre">Log/camera_crash_stack_trace_xx.log</span></code>.
Please send this log to the support team or submit it to a GitHub issue for further assistance.</p>
</section>
<section id="no-data-stream-from-multiple-cameras">
<h3>No Data Stream from Multiple Cameras<a class="headerlink" href="#no-data-stream-from-multiple-cameras" title="Link to this heading"></a></h3>
<p><strong>Insufficient Power Supply</strong>:</p>
<ul class="simple">
<li><p>Ensure that each camera is connected to a separate hub.</p></li>
<li><p>Use a powered hub to provide sufficient power to each camera.</p></li>
</ul>
<p><strong>High Resolution</strong>:</p>
<ul class="simple">
<li><p>Try lowering the resolution to resolve data stream issues.</p></li>
</ul>
<p><strong>Increase usbfs_memory_mb Value</strong>:</p>
<ul class="simple">
<li><p>Increase the <code class="docutils literal notranslate"><span class="pre">usbfs_memory_mb</span></code> value to 128MB (this is a reference value and can be adjusted based on your system’s needs)
by running the following command:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="m">128</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/sys/module/usbcore/parameters/usbfs_memory_mb
</pre></div>
</div>
<ul class="simple">
<li><p>To make this change permanent, check <a class="reference external" href="https://github.com/OpenKinect/libfreenect2/issues/807">this link</a>.</p></li>
</ul>
</section>
<section id="additional-troubleshooting">
<h3>Additional Troubleshooting<a class="headerlink" href="#additional-troubleshooting" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>If you encounter other issues, set the <code class="docutils literal notranslate"><span class="pre">log_level</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">debug</span></code>. This will generate an SDK log file in the running directory: <code class="docutils literal notranslate"><span class="pre">Log/OrbbecSDK.log.txt</span></code>.
Please provide this file to the support team for further assistance.</p></li>
<li><p>If firmware logs are required, set <code class="docutils literal notranslate"><span class="pre">enable_heartbeat</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to activate this feature.</p></li>
</ul>
</section>
<section id="why-are-there-so-many-launch-files">
<h3>Why Are There So Many Launch Files?<a class="headerlink" href="#why-are-there-so-many-launch-files" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Different cameras have varying default resolutions and image formats.</p></li>
<li><p>To simplify usage, each camera has its own launch file.</p></li>
</ul>
</section>
</section>
<section id="other-useful-links">
<h2>Other useful links<a class="headerlink" href="#other-useful-links" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://orbbec.github.io/OrbbecSDK/">Orbbec SDK</a></p></li>
<li><p><a class="reference external" href="https://www.orbbec.com/docs/g330-use-depth-presets/">Gemini 330 depth presets</a></p></li>
</ul>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading"></a></h2>
<p>Copyright 2024 Orbbec Ltd.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this project except in compliance with
the License. You may obtain a copy of the License at</p>
<p><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “
AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific
language governing permissions and limitations under the License.</p>
<p><strong>Other names and brands may be claimed as the property of others</strong></p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, ORBBEC INC. www.orbbec.com.cn.
      <span class="lastupdated">Last updated on 2024-11-04 14:58:37.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>